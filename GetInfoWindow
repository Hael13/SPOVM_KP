// GetInfoWindow.cpp: файл реализации
//

#include "stdafx.h"
#include "GetInfoWindow.h"


// диалоговое окно GetInfoWindow

IMPLEMENT_DYNAMIC(GetInfoWindow, CDialog)

GetInfoWindow::GetInfoWindow(UINT templ, CWnd* pParent /*=NULL*/): CDialog(templ, pParent)
{
	this->DoModal();
}

GetInfoWindow::~GetInfoWindow()
{
	this->EndDialog(0);
}

void GetInfoWindow::DoDataExchange(CDataExchange* pDX)
{
	CDialog::DoDataExchange(pDX);
	DDX_Control(pDX, IDC_CONNECT, ok);
	DDX_Control(pDX, IDC_IP, text_field);
}


BEGIN_MESSAGE_MAP(GetInfoWindow, CDialog)
	ON_BN_CLICKED(IDC_CONNECT, &GetInfoWindow::OnBnClickedConnect)
END_MESSAGE_MAP()


// обработчики сообщений GetInfoWindow

char* GetInfoWindow::get_inf()
{
	return this->result;
}

void GetInfoWindow::OnBnClickedConnect()
{
	this->result = new char[256];
	int size;
	size = this->text_field.GetLine(0, this->result);
	this->result[size] = '\0';
	this->EndDialog(0);
}
